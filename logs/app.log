2025-10-20 19:40:48:098 INFO  [background-preinit] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.3.Final
2025-10-20 19:40:48:142 INFO  [main] c.leander.cinema.CinemaApplication - Starting CinemaApplication using Java 24.0.2 with PID 22972 (C:\Users\cirru\IdeaProjects\Wigell_Cinema\target\classes started by cirru in C:\Users\cirru\IdeaProjects\Wigell_Cinema)
2025-10-20 19:40:48:143 INFO  [main] c.leander.cinema.CinemaApplication - The following 1 profile is active: "prod"
2025-10-20 19:40:48:990 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-20 19:40:49:052 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 56 ms. Found 8 JPA repository interfaces.
2025-10-20 19:40:49:510 INFO  [main] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8583 (http)
2025-10-20 19:40:49:521 INFO  [main] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8583"]
2025-10-20 19:40:49:523 INFO  [main] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-10-20 19:40:49:523 INFO  [main] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-10-20 19:40:49:565 INFO  [main] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-10-20 19:40:49:565 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1380 ms
2025-10-20 19:40:49:782 INFO  [main] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-20 19:40:49:820 INFO  [main] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.29.Final
2025-10-20 19:40:49:844 INFO  [main] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-10-20 19:40:50:073 INFO  [main] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-20 19:40:50:095 INFO  [main] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-10-20 19:40:50:423 INFO  [main] com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@645c9f0f
2025-10-20 19:40:50:425 INFO  [main] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-10-20 19:40:50:491 INFO  [main] o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0.41
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-10-20 19:40:51:512 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-20 19:40:51:659 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-20 19:40:52:104 INFO  [main] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-10-20 19:40:52:885 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-10-20 19:40:52:918 INFO  [main] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name appUserDetailsService
2025-10-20 19:40:53:776 INFO  [main] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8583"]
2025-10-20 19:40:53:787 INFO  [main] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8583 (http) with context path '/'
2025-10-20 19:40:53:849 INFO  [main] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 6081 (http)
2025-10-20 19:40:53:849 INFO  [main] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-6081"]
2025-10-20 19:40:53:850 INFO  [main] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-10-20 19:40:53:850 INFO  [main] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-10-20 19:40:53:870 INFO  [main] o.a.c.c.C.[Tomcat-1].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-10-20 19:40:53:871 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 82 ms
2025-10-20 19:40:53:881 INFO  [main] o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoints beneath base path '/actuator'
2025-10-20 19:40:53:908 INFO  [main] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-6081"]
2025-10-20 19:40:53:910 INFO  [main] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 6081 (http) with context path '/'
2025-10-20 19:40:53:922 INFO  [main] c.leander.cinema.CinemaApplication - Started CinemaApplication in 6.3 seconds (process running for 6.815)
2025-10-20 19:40:54:203 INFO  [main] c.l.cinema.config.DataInitializer - admin1 skapades
2025-10-20 19:40:54:218 INFO  [main] c.l.cinema.config.DataInitializer - admin2 skapades
2025-10-20 19:40:54:615 INFO  [main] c.l.cinema.config.DataInitializer - Address 1 skapades
2025-10-20 19:40:54:626 INFO  [main] c.l.cinema.config.DataInitializer - Address 2 skapades
2025-10-20 19:40:54:634 INFO  [main] c.l.cinema.config.DataInitializer - Address 3 skapades
2025-10-20 19:40:54:645 INFO  [main] c.l.cinema.config.DataInitializer - Address 4 skapades
2025-10-20 19:40:54:703 INFO  [main] c.l.cinema.config.DataInitializer - Kund och user1 skapades
2025-10-20 19:40:54:722 INFO  [main] c.l.cinema.config.DataInitializer - Kund och user2 skapades
2025-10-20 19:40:54:732 INFO  [main] c.l.cinema.config.DataInitializer - Kund och user3 skapades
2025-10-20 19:40:54:745 INFO  [main] c.l.cinema.config.DataInitializer - Kund och user4 skapades
2025-10-20 19:40:54:756 INFO  [main] c.l.cinema.config.DataInitializer - Kund och user5 skapades
2025-10-20 19:40:54:775 INFO  [main] c.l.cinema.config.DataInitializer - Film 1 skapades
2025-10-20 19:40:54:793 INFO  [main] c.l.cinema.config.DataInitializer - Film 2 skapades
2025-10-20 19:40:54:806 INFO  [main] c.l.cinema.config.DataInitializer - Film 3 skapades
2025-10-20 19:40:54:819 INFO  [main] c.l.cinema.config.DataInitializer - Film 4 skapades
2025-10-20 19:40:54:832 INFO  [main] c.l.cinema.config.DataInitializer - Film 5 skapades
2025-10-20 19:40:54:846 INFO  [main] c.l.cinema.config.DataInitializer - Lokal 1 skapades
2025-10-20 19:40:54:857 INFO  [main] c.l.cinema.config.DataInitializer - Lokal 2 skapades
2025-10-20 19:40:54:867 INFO  [main] c.l.cinema.config.DataInitializer - Lokal 3 skapades
2025-10-20 19:40:54:877 INFO  [main] c.l.cinema.config.DataInitializer - Lokal 4 skapades
2025-10-20 19:40:54:888 INFO  [main] c.l.cinema.config.DataInitializer - Lokal 5 skapades
2025-10-20 19:40:54:899 INFO  [main] c.l.cinema.config.DataInitializer - Föreställning 1 skapades
2025-10-20 19:40:54:909 INFO  [main] c.l.cinema.config.DataInitializer - Föreställning 2 skapades
2025-10-20 19:40:54:918 INFO  [main] c.l.cinema.config.DataInitializer - Föreställning 3 skapades
2025-10-20 19:40:54:927 INFO  [main] c.l.cinema.config.DataInitializer - Föreställning 4 skapades
2025-10-20 19:40:54:941 INFO  [main] c.l.cinema.config.DataInitializer - Bokning 1 skapades
2025-10-20 19:40:54:953 INFO  [main] c.l.cinema.config.DataInitializer - Bokning 2 skapades
2025-10-20 19:40:55:067 WARN  [registrationTask1] d.c.b.a.c.r.ApplicationRegistrator - Failed to register application as Application(name=Wigell Cinema mikrotjänst, managementUrl=http://localhost:6081/actuator, healthUrl=http://localhost:6081/actuator/health, serviceUrl=http://host.docker.internal:8583/) at spring-boot-admin ([http://localhost:9090/instances]): I/O error on POST request for "http://localhost:9090/instances": null. Further attempts are logged on DEBUG level
org.springframework.web.client.ResourceAccessException: I/O error on POST request for "http://localhost:9090/instances": null
	at org.springframework.web.client.DefaultRestClient$DefaultRequestBodyUriSpec.createResourceAccessException(DefaultRestClient.java:704)
	at org.springframework.web.client.DefaultRestClient$DefaultRequestBodyUriSpec.exchangeInternal(DefaultRestClient.java:589)
	at org.springframework.web.client.DefaultRestClient$DefaultRequestBodyUriSpec.exchange(DefaultRestClient.java:540)
	at org.springframework.web.client.RestClient$RequestHeadersSpec.exchange(RestClient.java:680)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.executeAndExtract(DefaultRestClient.java:821)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.body(DefaultRestClient.java:765)
	at de.codecentric.boot.admin.client.registration.RestClientRegistrationClient.register(RestClientRegistrationClient.java:45)
	at de.codecentric.boot.admin.client.registration.DefaultApplicationRegistrator.register(DefaultApplicationRegistrator.java:80)
	at de.codecentric.boot.admin.client.registration.DefaultApplicationRegistrator.register(DefaultApplicationRegistrator.java:61)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:545)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:369)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:310)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1095)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:619)
	at java.base/java.lang.Thread.run(Thread.java:1447)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1069)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:215)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:268)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$0(PlainHttpConnection.java:226)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:980)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:957)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:556)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1819)
	... 3 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:204)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:942)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:203)
	... 9 common frames omitted
2025-10-20 19:40:55:402 INFO  [RMI TCP Connection(3)-192.168.0.152] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-10-20 19:40:55:402 INFO  [RMI TCP Connection(3)-192.168.0.152] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-10-20 19:40:55:404 INFO  [RMI TCP Connection(3)-192.168.0.152] o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-10-20 19:40:57:764 INFO  [http-nio-8583-exec-6] c.l.cinema.service.CustomerService - Admin skapade adress 5 vid uppdatering av kund 1
2025-10-20 19:40:57:767 INFO  [http-nio-8583-exec-6] c.l.cinema.service.CustomerService - Admin uppdaterade 1 adress/er på kund 1
2025-10-20 19:40:57:779 INFO  [http-nio-8583-exec-6] c.l.cinema.service.CustomerService - Admin tog bort adress 1 vid uppdatering av kund 1
2025-10-20 19:40:57:887 INFO  [http-nio-8583-exec-6] c.l.cinema.service.CustomerService - Admin uppdaterade kund 1
2025-10-20 19:40:57:902 INFO  [http-nio-8583-exec-6] c.l.c.controller.AdminController - PUT /api/v1/customers/{customerId} admin uppdaterade kunden 1 AdminCustomerResponseDto[customerId=1, firstName=Anna, lastName=Karlsson, email=anna.tythkarlsson@example.com, phone=0701234567, addresses=[AdminAddressResponseDto[addressId=5, street=Mangelvägen 55, postalCode=87622, city=Kiruna]], tickets=[], bookings=[AdminBookingResponseDto[bookingId=1, reservationStartTime=2025-10-21T15:00, reservationEndTime=2025-11-01T16:00, numberOfGuests=100, roomEquipment=[kakor], room=AdminRoomResponseDto[roomId=4, name=Naturscenen, maxGuests=1000, priceSek=20000.00, priceUsd=2000.00, standardEquipment=[Naturscen, Projektor]], totalPriceSek=12000.00, totalPriceUsd=1200.00, speakerName=null, movie=AdminMovieResponseDto[movieId=3, title=Avengers: Endgame, genre=Action, ageLimit=11, duration=181], bookingStatus=COMPLETED]], username=user1]
2025-10-20 19:41:20:804 INFO  [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-10-20 19:41:20:825 INFO  [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-10-20 19:41:20:827 INFO  [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-10-20 19:41:20:845 INFO  [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-10-20 19:41:20:856 INFO  [SpringApplicationShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-20 19:41:20:857 INFO  [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-10-20 19:41:20:861 INFO  [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
